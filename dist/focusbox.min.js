!function(t,e,s,i){var n,o,a,r,c,h,l,u,f,p;n='<div class="focusbox">\n	<a class="close"></a>\n	<div class="content">\n		<!-- focusbox content is placed here -->\n	</div>\n</div>',o=function(s){function i(e,i){this.settings=t.extend({},n,i),this._defaults=n,this.parent=e,this.$template=t(s),this.init()}var n={},o="Basic";return t.extend(!0,i.prototype,{init:function(){this.$content=this.$template.find(".content"),this.$close=this.$template.find(".close")},open:function(e){return this.$close.on("click."+o,function(e){e.preventDefault(),t.focusbox.close()}),t.focusbox.open(this,e)},render:function(s){this.$content.html(s);var i,n,o=this;return this.$template.css({opacity:0}),e.setTimeout(function(){i=o.$template.outerHeight(),o.$template.stop(!0,!0).css({height:0}).animate({opacity:1},100,function(){n=t(e).height(),i=Math.min(i,n),o.$template.stop(!0,!0).animate({height:i},230,function(){o.$template.css("height","auto")})})},1),this.$template},close:function(){var e=this;this.$close.off("click."+o),this.$template.stop(!0,!0).animate({opacity:0},200,function(){t(e).trigger("closed")})},remove:function(){this.$close.off("click."+o),this.$template.stop(!0,!0)}}),{theme:i,name:o}}(n),a=function(){for(var t=arguments,e={},s=t.length-1;s>=0;s--)e[t[s].name]=t[s].theme;return e}(o),r=function(e){var i=e;return function(){return this.$body=t("body"),this.$overlay=t(s.createElement("div")).attr("id",this.settings.prefix+this.settings.overlayId),this.$overlayBg=t(s.createElement("div")).attr("id",this.settings.prefix+this.settings.overlayBgId),this.themes=i,this}}(a),c=function(){function n(){var t=e.pageXOffset!==i?e.pageXOffset:(s.documentElement||s.body.parentNode||s.body).scrollLeft,n=e.pageYOffset!==i?e.pageYOffset:(s.documentElement||s.body.parentNode||s.body).scrollTop;return{x:-1*parseFloat(t),y:-1*parseFloat(n)}}function o(e){var i=s.createElement("div");for(i.id=e;s.body.firstChild;)i.appendChild(s.body.firstChild);return s.body.appendChild(i),t(i)}function a(t){var e;return this.current=t,e=t.render.apply(t,Array.prototype.slice.call(arguments,1)),this.$overlay.append(e),e}function r(e){var i=this;e.esc&&t(s).on("keyup."+this._name,function(e){27===e.which&&(e.preventDefault(),t(s).off("keyup."+i._name),i.close())}),e.overlay&&this.$overlay.on("click."+this._name,function(){event.target==i.$overlay[0]&&(event.preventDefault(),i.$overlay.off("click."+i._name),i.close())})}return function(){var s;return this.current?(this.current.close(),s=a.apply(this,arguments),t(this).trigger("switched")):(this.scroll=n(),this.$pageWrap=o(this.settings.prefix+this.settings.pageWrapId),this.$pageWrap.css({left:this.scroll.x,top:this.scroll.y}),this.$body.append(this.$overlay,this.$overlayBg),this.$overlayBg.css({opacity:0}).stop(!0,!0).animate({opacity:.3},180),s=a.apply(this,arguments),e.scrollTo(0,0),r.call(this,this.settings.closeOn),t("html, body").addClass("hasOverlay"),t(this).trigger("opened")),s}}(),h=function(){var i=this.$pageWrap[0],n=this;return t(this.current).one("closed",function(){for(;i.firstChild;)s.body.appendChild(i.firstChild);e.scrollTo(-n.scroll.x,-n.scroll.y),n.$pageWrap.remove(),n.$overlayBg.stop(!0,!0).animate({opacity:0},160,function(){n.current=null,n.$overlay.add(n.$overlayBg).empty().detach(),t("html, body").removeClass("hasOverlay"),t(n).trigger("closed")})}),this.current.close(),this},l=function(e){return this.settings=t.extend(!0,{},this.settings,e),this.$overlay.attr("id",this.settings.prefix+this.settings.overlayId),this.settings.closeOn.esc||t(s).off("keyup."+this._name),this.settings.closeOn.overlay||this.$overlay.off("click."+this._name),this},u=function(e,s,i,n){function o(e){this.settings=t.extend(!0,{},r,e),this._defaults=r,this._name=a,this.init()}var a="Focusbox",r={prefix:"focusbox_",closeOn:{overlay:!0,esc:!0},pageWrapId:"pageWrap",overlayId:"overlay",overlayBgId:"overlayBg"};return t.extend(o.prototype,{init:e,open:s,close:i,options:n}),o}(r,c,h,l),f=function(){function e(e,s){return this.element=t(e),this.data=this.element.data("focusbox"),this.eventType=s||"click.focusBox",this.init(),this}t.extend(!0,e.prototype,{init:function(){var e=this;switch(this.data.type){case"ajax":var s=this.data.data;return this.theme=new t.focusbox.themes.Basic,void this.element.on(this.eventType,function(i){i.preventDefault(),t.ajax({url:s.url,data:s.data,type:s.type,success:function(t){e.theme.open(t)}})});case"selector":this.content=t(this.data.data).html(),this.theme=new t.focusbox.themes.Basic;break;case"html":this.content=this.data.data,this.theme=new t.focusbox.themes.Basic}this.element.on(this.eventType,function(t){t.preventDefault(),e.theme.open(e.content)})},unbind:function(){this.element.off(this.eventType)}}),t.fn.focusbox=function(s){return this.each("unbind"==arguments[0]?function(){t.data(this,"plugin_focusbox")&&t.data(this,"plugin_focusbox").unbind()}:function(){t.data(this,"plugin_focusbox")||t.data(this,"plugin_focusbox",new e(this,s))})}}(u),function(e){t.focusbox=new e,t("[data-focusbox]").focusbox()}(u),p=i}(jQuery,window,document);